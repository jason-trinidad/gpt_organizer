const O="/assets/tiktoken_bg-89b5fa67.wasm",L=async(e={},n)=>{let r;if(n.startsWith("data:")){const o=n.replace(/^data:.*?base64,/,"");let i;if(typeof Buffer=="function"&&typeof Buffer.from=="function")i=Buffer.from(o,"base64");else if(typeof atob=="function"){const _=atob(o);i=new Uint8Array(_.length);for(let d=0;d<_.length;d++)i[d]=_.charCodeAt(d)}else throw new Error("Cannot decode base64-encoded data URL");r=await WebAssembly.instantiate(i,e)}else{const o=await fetch(n),i=o.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&i.startsWith("application/wasm"))r=await WebAssembly.instantiateStreaming(o,e);else{const _=await o.arrayBuffer();r=await WebAssembly.instantiate(_,e)}}return r.instance.exports};let t;function C(e){t=e}const p=new Array(128).fill(void 0);p.push(void 0,null,!0,!1);function W(e){return p[e]}let y=p.length;function B(e){e<132||(p[e]=y,y=e)}function g(e){const n=W(e);return B(e),n}let b=0,m=null;function k(){return(m===null||m.byteLength===0)&&(m=new Uint8Array(t.memory.buffer)),m}const D=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let A=new D("utf-8");const I=typeof A.encodeInto=="function"?function(e,n){return A.encodeInto(e,n)}:function(e,n){const r=A.encode(e);return n.set(r),{read:e.length,written:r.length}};function w(e,n,r){if(r===void 0){const a=A.encode(e),l=n(a.length);return k().subarray(l,l+a.length).set(a),b=a.length,l}let o=e.length,i=n(o);const _=k();let d=0;for(;d<o;d++){const a=e.charCodeAt(d);if(a>127)break;_[i+d]=a}if(d!==o){d!==0&&(e=e.slice(d)),i=r(i,o,o=d+e.length*3);const a=k().subarray(i+d,i+o),l=I(e,a);d+=l.written}return b=d,i}function F(e){return e==null}let x=null;function s(){return(x===null||x.byteLength===0)&&(x=new Int32Array(t.memory.buffer)),x}const N=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let T=new N("utf-8",{ignoreBOM:!0,fatal:!0});T.decode();function E(e,n){return T.decode(k().subarray(e,e+n))}function u(e){y===p.length&&p.push(p.length+1);const n=y;return y=p[n],p[n]=e,n}let v=null;function q(){return(v===null||v.byteLength===0)&&(v=new Uint32Array(t.memory.buffer)),v}function S(e,n){return q().subarray(e/4,e/4+n)}function R(e,n){const r=n(e.length*1);return k().set(e,r/1),b=e.length,r}function $(e,n){const r=n(e.length*4);return q().set(e,r/4),b=e.length,r}function M(e,n){return k().subarray(e/1,e/1+n)}function fe(e,n){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const _=t.__wbindgen_add_to_stack_pointer(-16),d=w(e,t.__wbindgen_export_0,t.__wbindgen_export_1),a=b;t.get_encoding(_,d,a,u(n));var r=s()[_/4+0],o=s()[_/4+1],i=s()[_/4+2];if(i)throw g(o);return h.__wrap(r)}finally{t.__wbindgen_add_to_stack_pointer(16)}}function ge(e,n){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const _=t.__wbindgen_add_to_stack_pointer(-16),d=w(e,t.__wbindgen_export_0,t.__wbindgen_export_1),a=b;t.encoding_for_model(_,d,a,u(n));var r=s()[_/4+0],o=s()[_/4+1],i=s()[_/4+2];if(i)throw g(o);return h.__wrap(r)}finally{t.__wbindgen_add_to_stack_pointer(16)}}function z(e,n){try{return e.apply(this,n)}catch(r){t.__wbindgen_export_3(u(r))}}class h{static __wrap(n){const r=Object.create(h.prototype);return r.ptr=n,r}__destroy_into_raw(){const n=this.ptr;return this.ptr=0,n}free(){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");const n=this.__destroy_into_raw();t.__wbg_tiktoken_free(n)}constructor(n,r,o){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");const i=w(n,t.__wbindgen_export_0,t.__wbindgen_export_1),_=b,d=w(o,t.__wbindgen_export_0,t.__wbindgen_export_1),a=b,l=t.tiktoken_new(i,_,u(r),d,a);return h.__wrap(l)}get name(){try{const o=t.__wbindgen_add_to_stack_pointer(-16);t.tiktoken_name(o,this.ptr);var n=s()[o/4+0],r=s()[o/4+1];let i;return n!==0&&(i=E(n,r).slice(),t.__wbindgen_export_2(n,r*1)),i}finally{t.__wbindgen_add_to_stack_pointer(16)}}encode(n,r,o){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const f=t.__wbindgen_add_to_stack_pointer(-16),U=w(n,t.__wbindgen_export_0,t.__wbindgen_export_1),j=b;t.tiktoken_encode(f,this.ptr,U,j,u(r),u(o));var i=s()[f/4+0],_=s()[f/4+1],d=s()[f/4+2],a=s()[f/4+3];if(a)throw g(d);var l=S(i,_).slice();return t.__wbindgen_export_2(i,_*4),l}finally{t.__wbindgen_add_to_stack_pointer(16)}}encode_ordinary(n){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const _=t.__wbindgen_add_to_stack_pointer(-16),d=w(n,t.__wbindgen_export_0,t.__wbindgen_export_1),a=b;t.tiktoken_encode_ordinary(_,this.ptr,d,a);var r=s()[_/4+0],o=s()[_/4+1],i=S(r,o).slice();return t.__wbindgen_export_2(r,o*4),i}finally{t.__wbindgen_add_to_stack_pointer(16)}}encode_with_unstable(n,r,o){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const a=t.__wbindgen_add_to_stack_pointer(-16),l=w(n,t.__wbindgen_export_0,t.__wbindgen_export_1),f=b;t.tiktoken_encode_with_unstable(a,this.ptr,l,f,u(r),u(o));var i=s()[a/4+0],_=s()[a/4+1],d=s()[a/4+2];if(d)throw g(_);return g(i)}finally{t.__wbindgen_add_to_stack_pointer(16)}}encode_single_token(n){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");const r=R(n,t.__wbindgen_export_0),o=b;return t.tiktoken_encode_single_token(this.ptr,r,o)>>>0}decode(n){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const _=t.__wbindgen_add_to_stack_pointer(-16),d=$(n,t.__wbindgen_export_0),a=b;t.tiktoken_decode(_,this.ptr,d,a);var r=s()[_/4+0],o=s()[_/4+1],i=M(r,o).slice();return t.__wbindgen_export_2(r,o*1),i}finally{t.__wbindgen_add_to_stack_pointer(16)}}decode_single_token_bytes(n){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const _=t.__wbindgen_add_to_stack_pointer(-16);t.tiktoken_decode_single_token_bytes(_,this.ptr,n);var r=s()[_/4+0],o=s()[_/4+1],i=M(r,o).slice();return t.__wbindgen_export_2(r,o*1),i}finally{t.__wbindgen_add_to_stack_pointer(16)}}token_byte_values(){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");const n=t.tiktoken_token_byte_values(this.ptr);return g(n)}}function J(e){g(e)}function H(e){return W(e)===void 0}function P(){return z(function(e){const n=JSON.stringify(W(e));return u(n)},arguments)}function V(e,n){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");const r=W(n),o=typeof r=="string"?r:void 0;var i=F(o)?0:w(o,t.__wbindgen_export_0,t.__wbindgen_export_1),_=b;s()[e/4+1]=_,s()[e/4+0]=i}function G(e,n){const r=new Error(E(e,n));return u(r)}function K(){return z(function(e,n){const r=JSON.parse(E(e,n));return u(r)},arguments)}function Q(e,n){throw new Error(E(e,n))}URL=globalThis.URL;const c=await L({"./tiktoken_bg.js":{__wbindgen_object_drop_ref:J,__wbindgen_is_undefined:H,__wbg_stringify_029a979dfb73aa17:P,__wbindgen_string_get:V,__wbindgen_error_new:G,__wbg_parse_3ac95b51fc312db8:K,__wbindgen_throw:Q}},O),X=c.memory,Y=c.__wbg_tiktoken_free,Z=c.tiktoken_new,ee=c.tiktoken_name,ne=c.tiktoken_encode,te=c.tiktoken_encode_ordinary,re=c.tiktoken_encode_with_unstable,oe=c.tiktoken_encode_single_token,_e=c.tiktoken_decode,ie=c.tiktoken_decode_single_token_bytes,de=c.tiktoken_token_byte_values,ae=c.get_encoding,se=c.encoding_for_model,ce=c.__wbindgen_export_0,be=c.__wbindgen_export_1,le=c.__wbindgen_add_to_stack_pointer,ue=c.__wbindgen_export_2,pe=c.__wbindgen_export_3,we=Object.freeze(Object.defineProperty({__proto__:null,__wbg_tiktoken_free:Y,__wbindgen_add_to_stack_pointer:le,__wbindgen_export_0:ce,__wbindgen_export_1:be,__wbindgen_export_2:ue,__wbindgen_export_3:pe,encoding_for_model:se,get_encoding:ae,memory:X,tiktoken_decode:_e,tiktoken_decode_single_token_bytes:ie,tiktoken_encode:ne,tiktoken_encode_ordinary:te,tiktoken_encode_single_token:oe,tiktoken_encode_with_unstable:re,tiktoken_name:ee,tiktoken_new:Z,tiktoken_token_byte_values:de},Symbol.toStringTag,{value:"Module"}));C(we);export{h as Tiktoken,K as __wbg_parse_3ac95b51fc312db8,C as __wbg_set_wasm,P as __wbg_stringify_029a979dfb73aa17,G as __wbindgen_error_new,H as __wbindgen_is_undefined,J as __wbindgen_object_drop_ref,V as __wbindgen_string_get,Q as __wbindgen_throw,ge as encoding_for_model,fe as get_encoding};
